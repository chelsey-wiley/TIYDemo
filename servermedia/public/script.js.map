{"version":3,"sources":["script.js"],"names":["constraints","recBtn","document","querySelector","pauseResBtn","stopBtn","videoElement","dataElement","downloadLink","controls","errorCallback","error","console","log","mediaRecorder","chunks","count","startRecording","stream","MediaRecorder","isTypeSupported","options","mimeType","textContent","start","url","window","URL","webkitURL","src","createObjectURL","play","ondataavailable","e","push","data","onstop","blob","Blob","type","videoURL","href","innerHTML","rand","Math","floor","random","name","setAttribute","onBtnRecordClicked","navigator","getUserMedia","alert","disabled","onBtnStopClicked","stop","onPauseResumeClicked","pause","resume","message"],"mappings":"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","file":"script.js","sourcesContent":["'use strict';\n\n\n\tvar constraints = {\"audio\": true, \"video\": {  \"mandatory\": {  \"minWidth\": 640,  \"maxWidth\": 640, \"minHeight\": 480,\"maxHeight\": 480 }, \"optional\": [] } };//Chrome\n\n\nvar recBtn = document.querySelector('button#rec');\nvar pauseResBtn = document.querySelector('button#pauseRes');\nvar stopBtn = document.querySelector('button#stop');\n\nvar videoElement = document.querySelector('video');\nvar dataElement = document.querySelector('#data');\nvar downloadLink = document.querySelector('a#downloadLink');\n\nvideoElement.controls = false;\n\nfunction errorCallback(error){\n\tconsole.log('navigator.getUserMedia error: ', error);\n}\n\n\n\nvar mediaRecorder;\nvar chunks = [];\nvar count = 0;\n\nfunction startRecording(stream) {\n\tif (typeof MediaRecorder.isTypeSupported == 'function'){\n\t\tif (MediaRecorder.isTypeSupported('video/webm;codecs=h264')) {\n\t\t  var options = {mimeType: 'video/webm;codecs=h264'};\n\t\t} else if (MediaRecorder.isTypeSupported('video/webm;codecs=vp9')) {\n\t\t  var options = {mimeType: 'video/webm;codecs=vp9'};\n\t\t} else if (MediaRecorder.isTypeSupported('video/webm;codecs=vp8')) {\n\t\t  var options = {mimeType: 'video/webm;codecs=vp8'};\n\t\t}\n\n\t\tmediaRecorder = new MediaRecorder(stream, options);\n\t}else{\n\n\t\tmediaRecorder = new MediaRecorder(stream);\n\t}\n\n\tpauseResBtn.textContent = \"Pause\";\n\n\tmediaRecorder.start(10);\n\n\tvar url = window.URL || window.webkitURL;\n\tvideoElement.src = url ? url.createObjectURL(stream) : stream;\n\tvideoElement.play();\n\n\tmediaRecorder.ondataavailable = function(e) {\n\n\t\tchunks.push(e.data);\n\t};\n\n\n\n\tmediaRecorder.onstop = function(){\n\n\n\t\tvar blob = new Blob(chunks, {type: \"video/webm\"});\n\t\tchunks = [];\n\n\t\tvar videoURL = window.URL.createObjectURL(blob);\n\n\t\tdownloadLink.href = videoURL;\n\t\tvideoElement.src = videoURL;\n\t\tdownloadLink.innerHTML = 'Download video file';\n\n\t\tvar rand =  Math.floor((Math.random() * 10000000));\n\t\tvar name  = \"video_\"+rand+\".webm\" ;\n\n\t\tdownloadLink.setAttribute( \"download\", name);\n\t\tdownloadLink.setAttribute( \"name\", name);\n\t};\n\n\n}\n\n\nfunction onBtnRecordClicked (){\n\t if (typeof MediaRecorder === 'undefined' || !navigator.getUserMedia) {\n\t\talert('MediaRecorder not supported on your browser, use Firefox 30 or Chrome 49 instead.');\n\t}else {\n\t\tnavigator.getUserMedia(constraints, startRecording, errorCallback);\n\t\trecBtn.disabled = true;\n\t\tpauseResBtn.disabled = false;\n\t\tstopBtn.disabled = false;\n\t}\n}\n\nfunction onBtnStopClicked(){\n\tmediaRecorder.stop();\n\tvideoElement.controls = true;\n\n\trecBtn.disabled = false;\n\tpauseResBtn.disabled = true;\n\tstopBtn.disabled = true;\n}\n\nfunction onPauseResumeClicked(){\n\tif(pauseResBtn.textContent === \"Pause\"){\n\t\tconsole.log(\"pause\");\n\t\tpauseResBtn.textContent = \"Resume\";\n\t\tmediaRecorder.pause();\n\t\tstopBtn.disabled = true;\n\t}else{\n\t\tconsole.log(\"resume\");\n\t\tpauseResBtn.textContent = \"Pause\";\n\t\tmediaRecorder.resume();\n\t\tstopBtn.disabled = false;\n\t}\n\trecBtn.disabled = true;\n\tpauseResBtn.disabled = false;\n}\n\n\nfunction log(message){\n\tdataElement.innerHTML = dataElement.innerHTML+'<br>'+message ;\n}\n"]}