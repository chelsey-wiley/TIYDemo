{"version":3,"sources":["components/RecordingComponent.js"],"names":["window","FC","undefined","RecordingComponent","theInput","focus","state","apiResult","items","constraints","recBtn","document","querySelector","pauseResBtn","stopBtn","videoElement","dataElement","downloadLink","controls","errorCallback","error","console","log","mediaRecorder","chunks","count","startRecording","stream","MediaRecorder","isTypeSupported","options","mimeType","textContent","start","url","URL","webkitURL","src","createObjectURL","play","ondataavailable","e","push","data","onstop","blob","Blob","type","videoURL","href","innerHTML","rand","Math","floor","random","name","setAttribute","onBtnRecordClicked","navigator","getUserMedia","alert","disabled","onBtnStopClicked","stop","onPauseResumeClicked","pause","resume","message","React","Component"],"mappings":"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","file":"RecordingComponent.js","sourcesContent":["if (window.FC === undefined) {window.FC = {};}\n\n(function() {\n  'use strict';\n\n  class RecordingComponent extends React.Component {\n\n    componentDidMount(){\n      this.theInput.focus();\n    }\n\n    constructor(){\n      super();\n      this.state ={\n        apiResult:{\n          items:[]\n        }\n      }\n\n    var constraints = {\"audio\": true, \"video\": {  \"mandatory\": {  \"minWidth\": 640,  \"maxWidth\": 640, \"minHeight\": 480, \"maxHeight\": 480 }, \"optional\": [] } };\n\n    var recBtn = document.querySelector('button#rec');\n    var pauseResBtn = document.querySelector('button#pauseRes');\n    var stopBtn = document.querySelector('button#stop');\n\n    var videoElement = document.querySelector('video');\n    var dataElement = document.querySelector('#data');\n    var downloadLink = document.querySelector('a#downloadLink');\n\n    videoElement.controls = false;\n\n    function errorCallback(error){\n    \tconsole.log('navigator.getUserMedia error: ', error);\n    }\n\n\n\n    var mediaRecorder;\n    var chunks = [];\n    var count = 0;\n\n    function startRecording(stream) {\n    \tif (typeof MediaRecorder.isTypeSupported == 'function'){\n    \t\tif (MediaRecorder.isTypeSupported('video/webm;codecs=h264')) {\n    \t\t  var options = {mimeType: 'video/webm;codecs=h264'};\n    \t\t} else if (MediaRecorder.isTypeSupported('video/webm;codecs=vp9')) {\n    \t\t  var options = {mimeType: 'video/webm;codecs=vp9'};\n    \t\t} else if (MediaRecorder.isTypeSupported('video/webm;codecs=vp8')) {\n    \t\t  var options = {mimeType: 'video/webm;codecs=vp8'};\n    \t\t}\n\n    \t\tmediaRecorder = new MediaRecorder(stream, options);\n    \t}else{\n\n    \t\tmediaRecorder = new MediaRecorder(stream);\n    \t}\n\n    \tpauseResBtn.textContent = \"Pause\";\n\n    \tmediaRecorder.start(10);\n\n    \tvar url = window.URL || window.webkitURL;\n    \tvideoElement.src = url ? url.createObjectURL(stream) : stream;\n    \tvideoElement.play();\n\n    \tmediaRecorder.ondataavailable = function(e) {\n\n    \t\tchunks.push(e.data);\n    \t};\n\n\n\n    \tmediaRecorder.onstop = function(){\n\n\n    \t\tvar blob = new Blob(chunks, {type: \"video/webm\"});\n    \t\tchunks = [];\n\n    \t\tvar videoURL = window.URL.createObjectURL(blob);\n\n    \t\tdownloadLink.href = videoURL;\n    \t\tvideoElement.src = videoURL;\n    \t\tdownloadLink.innerHTML = 'Download video file';\n\n    \t\tvar rand =  Math.floor((Math.random() * 10000000));\n    \t\tvar name  = \"video_\"+rand+\".webm\" ;\n\n    \t\tdownloadLink.setAttribute( \"download\", name);\n    \t\tdownloadLink.setAttribute( \"name\", name);\n    \t};\n\n\n    }\n\n\n    function onBtnRecordClicked (){\n    \t if (typeof MediaRecorder === 'undefined' || !navigator.getUserMedia) {\n    \t\talert('MediaRecorder not supported on your browser, use Firefox 30 or Chrome 49 instead.');\n    \t}else {\n    \t\tnavigator.getUserMedia(constraints, startRecording, errorCallback);\n    \t\trecBtn.disabled = true;\n    \t\tpauseResBtn.disabled = false;\n    \t\tstopBtn.disabled = false;\n    \t}\n    }\n\n    function onBtnStopClicked(){\n    \tmediaRecorder.stop();\n    \tvideoElement.controls = true;\n\n    \trecBtn.disabled = false;\n    \tpauseResBtn.disabled = true;\n    \tstopBtn.disabled = true;\n    }\n\n    function onPauseResumeClicked(){\n    \tif(pauseResBtn.textContent === \"Pause\"){\n    \t\tconsole.log(\"pause\");\n    \t\tpauseResBtn.textContent = \"Resume\";\n    \t\tmediaRecorder.pause();\n    \t\tstopBtn.disabled = true;\n    \t}else{\n    \t\tconsole.log(\"resume\");\n    \t\tpauseResBtn.textContent = \"Pause\";\n    \t\tmediaRecorder.resume();\n    \t\tstopBtn.disabled = false;\n    \t}\n    \trecBtn.disabled = true;\n    \tpauseResBtn.disabled = false;\n    }\n\n\n    function log(message){\n    \tdataElement.innerHTML = dataElement.innerHTML+'<br>'+message ;\n    }\n\n\n\n    // render (){\n    //   return <div> Recording Component\n    //   </div>\n    // }\n  }\n}\n  FC.RecordingComponent = RecordingComponent;\n}());\n"]}